---
title: "[통신 및 네트워크] 데이터 링크 계층의 작업"
date: 2023-10-04 20:01:35 +0900
categories: [Study, Data Communication Network]
tags: [network]
---

> 데이터통신과 네트워킹, 조성호 저, 인피니티북스
> 
> > Chapter 6. 데이터 링크 계층의 작업

<br>

## **오류 처리 코드**

### **오류 처리 코드의 종류**

우선 오류의 종류에는 두 가지가 있다.

- 단일 오류: 특정 비트의 값이 변하는 것

- 연속 오류: 데이터가 연속적으로 변하는 것

그리고 오류 처리 코드의 종류에는 오류 탐색 코드와 오류 보정 코드가 있고, 이 글에서는 오류 탐색 코드만 정리하였다. 오류를 찾을 때 사용하는 코드를 **오류 탐색 코드**라 부르며, 다음과 같다.

- 패리티 비트

- CRC 코드

- 검사합(checksum)

<br>

### **패리티 비트**

<u>가장 간단한 오류 탐색 코드</u>

보내려는 데이터에 추가로 1비트를 붙여 보낸다. 즉, 추가된 비트에 0이나 1을 넣어 전체에서 1의 개수가 짝수 혹은 홀수가 되도록 한다. 이때 1의 개수가 짝수이면 짝수 패리티 비트, 홀수이면 홀수 패리티 비트라고 부른다.  
*패리티 비트를 사용할 경우, 네트워크는 사전에 짝수 패리티 비트를 쓰는지 홀수 패리티 비트를 쓰는지 규정한다.

다만 패리티 비트는 연속 에러에 취약하고, 에러가 발생한 위치를 알 수 없다는 단점이 있다.

⇒ 여러 개의 에러 감지를 위해 패리티 비트를 수직/수평으로 배열하는 방법도 있으나, 마찬가지로 연속 에러, 즉 짝수 개의 에러에 취약하다.

<br>

### **CRC(Cyclical Redundancy Check, 순환 중복 검사) 코드**

<u>가장 많이 사용되는 오류 탐색 코드</u>

우선 송신자와 수신자는 동일한 CRC 코드 값을 알고 있다. 수신자는 데이터를 CRC 코드 값으로 나누었을 때 0이 되도록 숫자를 추가하여 보낸다.

예를 들어 보내려는 데이터가 12이고 CRC 코드가 9인 경우, CRC 계산을 위해 한 자릿수가 추가되기 때문에 보내려는 데이터는 120부터 129 사이의 값이다. 그 중 126이 9로 나누었을 때 나머지가 0이 되므로 126을 전송하는 것이다. 받는 쪽에서는 받은 데이터를 CRC 코드 값으로 나누어 0이 되는지 확인하면 된다.

오류 탐색을 위해 8비트를 추가한다고 가정해보자. CRC 코드 값으로 2의 8승인 256을 사용하는 경우, 데이터를 CRC 코드 값으로 나누었을 때 0인 경우를 제외한 모든 값이 오류이므로 $2^8 - 1$인 255개의 오류를 찾을 수 있다.

CRC 코드 값은 표준으로 정해져 있으며 CRC-16, CRC-32, CRC-64 등이 사용된다. 붙어 있는 숫자는 오류를 검출하기 위해 추가되는 비트가 그 숫자만큼이라는 의미이다.

CRC 코드는 LAN 계층에서 주로 사용하고, CRC-16은 HDLC 헤더에, CRC-32는 이더넷 헤더에 주로 사용된다.

<br>

### **검사합**

<u>CRC보다 간단한 오류 탐색 코드</u>

보내려는 데이터를 일정 크기로 자르고 더하여 오류 탐색 코드를 만든다.

다만 특정 블록의 변형된 값이 다른 블록의 변형된 값과 상쇄되는 경우, 즉 변형되어 우연히 합이 같아진 경우에는 오류를 찾을 수 없다. 때문에 CRC보다 찾을 수 있는 오류의 개수가 적어 최근에는 CRC 방식을 더 선호한다.

<br>

### **2진수에서의 CRC 코드 작동 원리**

(left image) (right image)

CRC 방식에서는 나눗셈을 한 후 나머지를 붙여서 보내주었다. 따라서 보내는 쪽에서는 나머지를 붙여서 보내는 비트의 수만큼 0을 추가한 후 나눗셈을 하는데, 추가되는 비트는 나눠야 하는 수에 따라 결정된다. 예를 들어 CRC 코드 값이 1001인 경우 나머지의 비트의 수는 1001(4비트)보다 1비트 작은 3비트가 된다. 따라서 보내려는 데이터 1100에 000을 붙인 1100000을 대상으로 나눗셈 연산을 하는 것이다. 최종 연산 결과 나머지가 101이 되면 1100에 101을 붙여 받는 쪽에 보낸다.

받는 쪽에서는 전송된 1100101을 CRC 코드 값인 1001로 나눈다. 나눗셈의 결과 000이 나오므로 전송된 데이터에 오류가 없음을 확인할 수 있다.

<br>
