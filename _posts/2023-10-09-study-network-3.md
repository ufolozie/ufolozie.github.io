---
title: "[통신 및 네트워크] LAN의 특징과 규격"
date: 2023-10-09 18:14:58 +0900
categories: [Study, Data Communication Network]
tags: [network]
---

> 데이터통신과 네트워킹, 조성호 저, 인피니티북스
> 
> > Chapter 7. LAN의 특징과 규격

<br>

## **LAN 계층**

### **LAN의 계층 구조**

LAN 자체로 물리/연결/응용 계층이 존재하며, 세분화하면 논리 연결 제어(LLC)와 매체 접근 제어(MAC)로 나눌 수 있다. 정확히는 데이터 링크 계층을 논리 연결 제어 하부 계층과 매체 접근 제어 하부 계층으로 나눈 형태이다.

LAN에 관련된 표준은 IEEE에 의해 표준화되어 있으며, 논리 연결 제어는 802.2에, 매체 접근 제어는 802.3부터 802.22까지 정의되어 있다.

(image)

<br>

### **논리 연결 제어(LLC, Logical Link Control)**

<u>두 노드를 논리적으로 연결하고, 프레임을 송수신하는 방식을 정하고, 네트워크 계층에 있는 프로토콜과의 인터페이스를 제공하는 계층</u>

이 하부 계층의 주 역할은 프레임을 오류 없이 전달하면서도 프레임 전송률을 높이는 것이다. 효율성과 전송률 중 무엇을 중시할 것인가에 따라 응답 메시지(ACK)의 사용 여부가 결정된다.

ACK 사용 방식에 따라 3가지 타입으로 나눌 수 있다.

- LLC Type 1: ACK를 사용하지 않는 비연결형 서비스 방식

- LLC Type 2: ACK 및 슬라이딩 윈도우 프로토콜을 사용하는 연결형 서비스 방식

- LLC Type 3 

이때 ACK의 사용 여부와 관계없이 오류 탐색 코드는 무조건 사용되며, 일반적으로 CRC 코드를 사용한다.

<br>

### **매체 접근 제어(MAC, Media Access Control)**

<u>여러 종류의 LAN의 연결 형태, 데이터 전송 방법, 헤더들을 정의하는 계층</u>

유선 LAN 보급 초기에는 링 형태를 사용하는 토큰 링 LAN이 많이 사용되었으나, 별 형태를 사용하는 이더넷 LAN이 보급되면서 토큰 링은 거의 사용하지 않게 되었다. 현재 MAC에 대한 설명은 대부분 이더넷을 기준으로 한다.

LAN에는 하나로 연결된 선을 여러 호스트가 공유한다. 하나의 호스트가 통신을 시작하면 다른 호스트는 통신을 할 수 없으며, 만약 동시에 두 개 이상의 호스트가 통신을 하는 경우 충돌이 발생할 수 있다. 따라서 충돌이 일어나지 않도록 차단하거나, 충돌을 허용하는 대신 충돌 발생 시 이를 찾아내고 처리하는 경쟁 방식을 사용한다.

(image)

네트워크는 통신연결과 프로토콜로 구성된다. 따라서 토큰 링 LAN은 링 형태 + 토큰 링 프로토콜로 정의할 수 있다. 토큰 링 프로토콜에서 여러 호스트가 통신할 때는 예약 방식을 사용하여 충돌을 차단한다. 여러 호스트가 동시에 데이터를 전송하려는 경우에도 순서대로 데이터를 전송하기 때문에 충돌이 발생하지 않게 된다.

이더넷은 별 형태 + CSMA/CD 프로토콜로 정의한다. CSMA/CD에서 호스트들은 제약 없이 데이터를 보내며, 충돌이 발생하면 전송을 중지하고 다시 보낸다.

LAN에서 사용하는 주소를 MAC 혹은 물리적 주소라고 부르고, 총 6바이트로 구성된다. 일반적으로 MAC 주소는 16진수로 표시한다. MAC 주소는 통신기기가 만들어질 때 제조사가 임의로 부여한 값으로 변경할 수 없다.

<br>

<br>

## **이더넷과 토큰 링**

### **이더넷**

<u>컴퓨터 네트워크 기술의 하나로, 일반적으로 LAN에서 가장 많이 활용되는 기술 규격</u>

초기에는 버스 형태로 구성되었으며, 현재는 별 형태로 구성된다.

(image)

이더넷의 연결선으로는 다양한 통신선이 사용되는데, 그중 100BaseT라 불리는 선이 기본이다. 여기서 100은 100Mbps를 전송할 수 있는 규격의 선이라는 의미이며 T는 twisted pair(꼬임선)을 의미한다.

<br>

### **CSMA/CD**

LAN의 경우 하나의 선을 여러 호스트들이 공유하여 통신하기 때문에 충돌을 처리하는 프로토콜이 필요한데, 이더넷은 CSMA/CD(Carrier Sense Multiple Access with Collision Detection)이라는 프로토콜을 사용하여 경쟁 방식으로 충돌 문제를 해결한다.

CSMA(Carrier Sense Multiple Access)는 회선 상태에 따라 여러 명이 동시에 접근하는 방식을, CD(Collision Detection)은 충돌을 검사하여 제어하는 것을 의미한다.

CSMA/CD에 참여하는 모든 호스트는 선이 사용 중인지 아닌지를 계속해서 듣고 있으며(**스누핑**), 선을 사용하는 호스트가 없을 때 전송을 시작한다. 그러나 선을 사용하고 있지 않은 경우 두 개 이상의 호스트가 거의 동시에 데이터를 보낼 수 있는데, 이때 선 중간에서 신호가 충돌하게 된다. 이와 같은 충돌이 발생하면 데이터 전송을 즉각 멈추고 전체 호스트에게 충돌이 일어났음을 알리는 신호를 보낸다. 충돌을 일으킨 호스트들은 무작위 수를 만들어 서로 다른 시간 동안 기다리고, 대기가 끝나면 처음의 과정을 반복한다(어떤 호스트가 전송 중이면 기다리고, 선이 비어 있으면 전송을 시작한다).

결론적으로 CSMA/CD 방식에서는 운이 좋은 호스트가 먼저 데이터를 보내게 된다. 이러한 방식은 토큰 링 프로토콜보다 불합리해 보일 수 있으나, LAN을 구성하기 편하고 유지보수가 간편하기 때문에 현재 거의 대부분의 LAN은 이더넷이며 CSMA/CD 프로토콜을 사용하여 데이터를 전송한다.

<br>

### **토큰 링**

<u>토큰이라는 전기적 표식을 이용하는 네트워크 형태</u>

예약을 통해 충돌을 미리 차단하는 방식을 사용한다.

토큰 링에서 호스트들은 원형으로 연결되며, 토큰이라는 빈 패킷이 한쪽 방향으로 계속 회전한다. 전송을 하려는 호스트가 있다면 빈 토큰을 가져가서 토큰에 주소와 데이터를 채운 후 전송한다. 토큰은 회전하고 호스트들은 그 내용을 살펴본다. 만약 목적지 주소에 토큰이 도착하면 해당 호스트는 내용을 복사한 후 계속 토큰을 전달한다. 토큰이 회전을 계속하여 처음 데이터를 보냈던 곳에 돌아오면 해당 호스트는 토큰을 회수한 후 내용물을 지우고 빈 패킷을 다시 옆으로 전송한다.

이때 토큰에 데이터를 채워서 보낸 호스트가 데이터를 지우는 이유는 LAN에서 1대1 통신뿐 아니라 멀티캐스트나 브로드캐스트와 같은 1대 다수의 통신도 지원하기 때문이다. 다시 말해 토큰 링에서 데이터를 복사한 후 호스트가 토큰의 내용물을 지워 버리면 다른 호스트가 데이터를 받을 수 없기 때문이다.

하나의 호스트가 데이터를 보내고 지운 후 토큰을 옆으로 전송하기 때문에 여러 개의 호스트들은 순서대로 돌아가면서 데이터를 보내게 된다.

토큰 링은 출현 당시 매우 성공적이었으나 이더넷이 개발되면서 잘 쓰이지 않게 되었다.

<br>

<br>

## **데이터 링크 계층 프레임**

### **HDLC 프레임**

데이터 링크 계층에는 다양한 종류의 프로토콜이 있는데, 이 중 다른 프로토콜의 근간이 되는 것이 HDLC(High-level Data Link Control)이다.

HDLC 프로토콜은 동기식 전송을 사용하며, 동기식 중 비트 방식을 지원한다.

통신 방식으로 유니캐스트, 멀티캐스트, 브로드캐스트 모두를 지원한다.

흐름 제어로 슬라이딩 윈도우 프로토콜을 사용하며, Go-Back-N ARQ와 Selective Repeat ARQ를 모두 지원한다.

(image)

비트 방식을 사용하기 때문에 플래그(프리앰블, 포스트앰블)로 01111110의 비트 패턴을 사용한다. HDLC 프레임은 Information frame, Supervisory frame, Unnumbered frame의 총 3가지 종류가 있으며 그 구분은 Control 필드에서 정한다. FCS(Frame Check Sequence)는 오류 제어를 위해 사용되는 필드이며 CRC-16을 사용한다.

<br>

### **이더넷 프레임**

(image)

프리앰블은 프리앰블 7바이트와 SFD 1바이트, 총 8바이트로 구성된다. 프리앰블은 10101010을 7번 전송함으로써 통신이 시작됨을 알린다. SFD(Start Frame Delimiter)는 시작 프레임 식별자라 부르며 10101011 비트 패턴을 사용하여 프레임이 시작되는 것을 알려준다.

Destination address와 Source address는 각각 목적지 주소와 보내는 호스트 주소를 가리키며 둘 다 6바이트의 MAC 주소를 사용한다.

Data + padding 필드에는 LLC 계층으로부터 받은 LLC 프레임(LLC 헤더 + 패킷)이 들어간다.

이더넷 프레임은 최소 64바이트로 정의된다.여기서 64바이트는 프리앰블과 SFD를 뺀 나머지 크기를 의미한다. 그리고 이더넷 프레임의 데이터 크기는 최대 1500바이트로 한정된다.  
프레임에서 데이터를 제외한 나머지 부분, 즉 Destination address(6) + Source address(6) + Length/Type(2) + FCS(4)를 합치면 18바이트이다. 이더넷 프레임은 최소 64바이트여야 하기 때문에 데이터는 최소 46바이트(64 - 18 = 46) 이상이어야 한다. 만약 상위 계층에서 받은 데이터의 크기가 46보다 작을 경우에는 패딩을 붙여서 46바이트로 맞춰준다. 따라서 이더넷 프레임의 최대 크기는 1518바이트(18 + 1500 = 1518)이다.

이더넷 프레임의 크기는 최소 64바이트에서 최대 1518바이트로 한정되어 있기 때문에 프레임이 언제 끝날지 예측 가능하다. 따라서 포스트앰블을 사용하지 않으며 비트 스터핑도 필요하지 않다.

Length/Type 필드의 경우 데이터가 1500바이트 이하이면 데이터의 길이(length)를 나타내고, 1500바이트 이상이 되면 데이터에 들어 있는 LLC 종류(Type)로 해석한다.

FCS는 이더넷 프레임의 오류를 제어하는데, 4바이트 크기이며 CRC-32를 사용한다.

이더넷은 비신뢰적, 비연결적 특징을 가지는 프로토콜이다. 즉, 보내는 쪽과 받는 쪽이 합의 없이 통신한다. 이더넷은 유선에서 자주 사용하는 프로토콜인데, 유선에서는 무선보다 오류가 날 확률이 현저히 적기 때문에 신뢰성과 연결성보다는 속도를 중요시 하는 것이다.

<br>
